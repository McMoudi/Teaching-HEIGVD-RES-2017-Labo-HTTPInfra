NameVirtualHost *
<VirtualHost *:80>
        ServerName demo.res.ch

        DocumentRoot /var/www
        ProxyRequests Off


        Header add Set-Cookie "ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/" env=BALANCER_ROUTE_CHANGED
        <Proxy balancer://static>
          BalancerMember http://apache_static/  route=static1
          BalancerMember http://apache_static2/  route=static2
          BalancerMember http://apache_static3/  route=static3
          ProxySet stickysession=ROUTEID
        </Proxy>

        <Proxy balancer://dynamic>
                  BalancerMember http://express_dynamic:3000
                  BalancerMember http://express_dynamic2:3000
                  BalancerMember http://express_dynamic3:3000
                  ProxySet lbmethod=byrequests
        </Proxy>

        <Location /balancer-manager>
          SetHandler balancer-manager

          Order deny,allow
          Allow from all
        </Location>

                ProxyPass /balancer-manager !
                ProxyPass /api/students/ balancer://dynamic/
                ProxyPass / balancer://static/

                ProxyPassReverse api/students balancer://dynamic
                ProxyPassReverse / balancer://static/


</VirtualHost>